挑战：工资计算器读写数据文件

介绍

重新实现上一个挑战中的计算器，可以支持从配置文件中读取社保的税率，并读取员工工资数据文件，同时将输出信息写入员工工资单 csv 文件。

计算器执行中包含下面的三个参数：

- -c 配置文件 配置文件，由于各地的社保比例稍有不同，我们为每个城市提供一个社保比例的配置文件
- -d 员工工资数据文件 指定员工工资数据文件，文件中包含两列内容，分别为员工工号和工资金额
- -o 员工工资单数据文件 输出内容，将员工缴纳的社保、税前、税后工资等详细信息输出到文件中

配置文件格式如下，具体数字每个城市稍有不同：

    JiShuL = 2193.00
    JiShuH = 16446.00
    YangLao = 0.08
    YiLiao = 0.02
    ShiYe = 0.005
    GongShang = 0
    ShengYu = 0
    GongJiJin = 0.06

JiShuL 为社保缴费基数的下限，即工资低于 JiShuL 的值的时候，需要按照该数字乘以缴费比例来缴纳社保，JiShuH 为社保缴费基数的上限，即工资高于 JiShuH 的值的时候，需要按照 JiShuH 乘以缴费比例缴纳社保。工资在 JiShuL 和 JiShuH之间时候，需要按照你实际的工资金额乘以缴费比例计算社保费用。

例如工资为20000，但社保基数为 2193 ～ 16446，所以应该缴纳的社保就是用社保基数上限 16446 去乘以社保的比例计算实际缴纳的社保数，而不是用 20000。

配置文件中其他项目为社保及公积金的缴费比例。

员工工资数据文件格式每行为 工号,税前工资，举例如下：

    101,3500
    203,5000
    309,15000

输出的员工工资单数据文件每行格式为 工号,税前工资,社保金额,个税金额,税后工资如下：

    101,3500,577.50,0.00,2922.50
    203,5000,825.00,20.25,4154.75
    309,15000,2475.00,1251.25,11273.75

程序的执行过程如下，注意配置文件和输入的员工数据文件需要你自己创建并填入数据，可以参考上述的内容示例：

    $ ./calculator.py -c test.cfg -d user.csv -o gongzi.csv

执行成功不需要输出信息到屏幕，执行失败或有异常出现则将错误信息输出到屏幕。

目标

完成任务需要达成的目标：

1. 程序存放的位置 /home/shiyanlou/calculator.py
2. 程序必须对文件是否存在是否符合格式要求进行判断，如果有错误需要打印错误信息并退出
3. 程序返回的税后工资、个税及社保数字保留两位小数，如果是整数，仍然需要保留xxx.00 这种形式

提示语

下述实现方案仅供参考，会涉及到先前实验中学习到的知识点，如果自己对程序有足够的理解也可以不按照下述提示编写

- 需要注意社保基数的处理，比如 20000 元工资高于社保基数的上限 JiShuH 的值，就应该用 JiShuH 这个值去乘以比例计算需要缴纳的社保金额
- 可以实现一个配置类 Config，来获取并存储配置文件中的信息，Config 类 def __init__(self, configfile) 中定义一个字典 self._config = {} 来存储每个配置项和值，从文件中读取的时候需要注意使用 strip() 去掉空格，并可以使用字符串的 split('=') 将配置项和值切分开。从 Config 对象中获得配置信息的方法可以定义为 def get_config(self)，使用类似 config.get_config('JiShuH')
- 可以实现一个员工数据类 UserData，来获取并存储员工数据，同样 def __init__(self, userdatafile) 中定义一个字典 self.userdata = [] 存储文件中读取的用户 ID及工资，并实现相应的金额计算的方法def calculator(self) 及输出到文件中的方法 def dumptofile(self, outputfile)。
- 需要在上述类中实现文件读取和写入等操作，写入的格式需要保证符合上述描述内容
- 处理命令行参数的方式：

1. 首先使用 args = sys.argv[1:] 获得所有的命令行参数列表，即包括 -c test.cfg -d user.csv -o gongzi.csv 这些内容
2. 使用 index = args.index('-c') 获得 -c 参数的索引，那么配置文件的路径就是 -c 后的参数即 configfile = args[index+1]，同样，其他的 -d 和 -o 参数也用这种方法获得。

最后，因为后续的挑战将会用到现在写的代码，请使用 下载代码 保存到本地或者提交到自己的 Github。

知识点

- Python3 基础语法
- 文件读取与写入
- 面向对象编程
- 命令行参数
- 函数